<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div style="width: 100%; max-width: 950px; margin: 20px auto; padding: 30px; background: #ffffff; border: 1px solid #eeeeee; border-radius: 8px; font-family: 'Inter', sans-serif;">
  <h2 style="font-size: 1.4em; color: #333; margin-bottom: 5px; font-weight: 700;">Performance Data Analysis</h2>
  <p style="font-size: 0.9em; color: #777; margin-bottom: 30px;">Tournament & Internal Qualifier Verified Records.</p>
  
  <div style="margin-bottom: 50px;">
    <h3 style="font-size: 1.1em; color: #0c2340; margin-bottom: 15px; font-weight: 600; border-bottom: 2px solid #F15A22; padding-bottom: 5px;">Official Tournament Rounds</h3>
    <div style="position: relative; height: 380px;">
      <canvas id="officialTournamentChart"></canvas>
    </div>
  </div>

  <div>
    <h3 style="font-size: 1.1em; color: #0c2340; margin-bottom: 15px; font-weight: 600; border-bottom: 2px solid #806600; padding-bottom: 5px;">Internal Qualifier Rounds (TPC San Antonio)</h3>
    <div style="position: relative; height: 380px;">
      <canvas id="internalQualifierChart"></canvas>
    </div>
  </div>
</div>

<script>
// 1. Official Tournament Chart (툴팁 상세 정보 추가)
const ctxOfficial = document.getElementById('officialTournamentChart').getContext('2d');
new Chart(ctxOfficial, {
  type: 'line',
  data: {
    labels: ['9/07 (Argent)', '9/15 (Highlands)', '9/22 (Badger)', '10/05 (Trinity)', '12/27 (Patriot)'],
    datasets: [{
      label: 'Scoring Avg',
      data: [69.66, 70.66, 71.33, 72.0, 72.0],
      borderColor: '#F15A22',
      backgroundColor: 'rgba(241, 90, 34, 0.1)',
      borderWidth: 2,
      pointRadius: 6,
      tension: 0.1,
      fill: true
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: { y: { reverse: false, min: 68, max: 74, title: { display: true, text: 'Strokes' } } },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          afterLabel: function(context) {
            const rounds = ['70-70-69 (-7)', '74-71-70 (-1)', '71-71-76 (+2)', '75-73-74 (+6)', '71-73-72 (+6)'];
            const rank = ['T3', 'T6', 'T9', 'T12', 'T15'];
            const pwr = ['12.4', '14.1', '11.8', '13.5', '58.2'];
            const earned = ['209', '424', '642', '864', '1080'];
            const i = context.dataIndex;
            return [
              `Round Info: ${rounds[i]}`,
              `Final Rank: ${rank[i]}`,
              `--------------------`,
              `WAGR Power: ${pwr[i]}`,
              `WAGR Earned: ${earned[i]}`
            ];
          }
        }
      }
    }
  }
});

// 2. Internal Qualifier Chart (날짜 및 코스 최종 보정)
const ctxInternal = document.getElementById('internalQualifierChart').getContext('2d');
new Chart(ctxInternal, {
  type: 'line',
  data: {
    labels: [
      '27-ago (Can)', '28-ago (Can)', '01-sep (Can)', '01-sep (Oaks)', '02-sep (Oaks)', 
      '26-sep (Can)', '30-sep (Oaks)', '02-oct (Oaks)', '22-ene (Can)', '23-ene (Oaks)'
    ],
    datasets: [
      {
        label: 'TPC SA - Canyons',
        data: [69, 68, 69, null, null, 73, null, null, 68, null],
        borderColor: '#806600',
        backgroundColor: 'rgba(128, 102, 0, 0.1)',
        borderWidth: 2,
        pointRadius: 6,
        spanGaps: true
      },
      {
        label: 'TPC SA - Oaks',
        data: [null, null, null, 81, 74, null, 69, 74, null, 69],
        borderColor: '#0c2340',
        backgroundColor: 'rgba(12, 35, 64, 0.1)',
        borderWidth: 2,
        pointRadius: 6,
        spanGaps: true
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: { y: { reverse: false, min: 65, max: 85, title: { display: true, text: 'Strokes' } } },
    plugins: { legend: { position: 'bottom' } }
  }
});
</script>
