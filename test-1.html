<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div style="width: 100%; max-width: 950px; margin: 20px auto; padding: 30px; background: #ffffff; border: 1px solid #eeeeee; border-radius: 8px; font-family: 'Inter', sans-serif;">
  <h2 style="font-size: 1.4em; color: #333; margin-bottom: 5px; font-weight: 700;">Performance Data Analysis</h2>
  <p style="font-size: 0.9em; color: #777; margin-bottom: 30px;">Tournament and qualifier rounds at TPC San Antonio and national events.</p>
  
  <div style="margin-bottom: 50px;">
    <h3 style="font-size: 1.1em; color: #0c2340; margin-bottom: 15px; font-weight: 600; border-bottom: 2px solid #F15A22; padding-bottom: 5px;">Official Tournament Rounds</h3>
    <div style="position: relative; height: 350px;">
      <canvas id="officialTournamentChart"></canvas>
    </div>
  </div>

  <div>
    <h3 style="font-size: 1.1em; color: #0c2340; margin-bottom: 15px; font-weight: 600; border-bottom: 2px solid #806600; padding-bottom: 5px;">Internal Qualifier Rounds (TPC San Antonio)</h3>
    <div style="position: relative; height: 350px;">
      <canvas id="internalQualifierChart"></canvas>
    </div>
  </div>
</div>

<script>
// ---------- 1. Official Tournament Chart (실제 데이터 반영) ----------
const ctxOfficial = document.getElementById('officialTournamentChart').getContext('2d');

new Chart(ctxOfficial, {
  type: 'line',
  data: {
    labels: ['9/29 (UTSA 1)', '10/1 (UTSA 2)', '10/14 (UTSA 3)', '10/28 (UTSA 4)', '12/29 (Patriot)'],
    datasets: [{
      label: 'Scoring Avg',
      data: [69.67, 70.67, 71.33, 72.0, 72.0], // 이미지 데이터 기반
      borderColor: '#F15A22',
      backgroundColor: 'rgba(241, 90, 34, 0.1)',
      borderWidth: 2,
      pointRadius: 6,
      tension: 0.2,
      fill: true
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      y: { 
        reverse: false, // 낮은 타수가 아래
        min: 68, max: 74,
        title: { display: true, text: 'Strokes' } 
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          afterLabel: function(context) {
            const metrics = ['WAGR 12.4', 'WAGR 14.1', 'WAGR 11.8', 'WAGR 13.5', 'WAGR 58.2'];
            return 'Metric: ' + metrics[context.dataIndex];
          }
        }
      }
    }
  }
});

// ---------- 2. Internal Qualifier Chart (실제 데이터 반영) ----------
const ctxInternal = document.getElementById('internalQualifierChart').getContext('2d');

new Chart(ctxInternal, {
  type: 'line',
  data: {
    labels: [
      '9/15 (Oaks)', '9/16 (Oaks)', 
      '9/22 (Canyons)', '9/23 (Canyons)', 
      '1/26 (Canyons)', '1/27 (Canyons)', '1/28 (Canyons)'
    ],
    datasets: [
      {
        label: 'Oaks Course',
        data: [72, 71, null, null, null, null, null],
        borderColor: '#0c2340',
        backgroundColor: 'rgba(12, 35, 64, 0.1)',
        borderWidth: 2,
        pointRadius: 6,
        spanGaps: true
      },
      {
        label: 'Canyons Course',
        data: [null, null, 73, 70, 68, 69, null], // 1/28(R3) 자리는 비워둠
        borderColor: '#806600',
        backgroundColor: 'rgba(128, 102, 0, 0.1)',
        borderWidth: 2,
        pointRadius: 6,
        spanGaps: true
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      y: { 
        reverse: false, // 낮은 타수가 아래
        min: 67, max: 75,
        title: { display: true, text: 'Strokes' } 
      }
    },
    plugins: {
      legend: { position: 'bottom' }
    }
  }
});
</script>
